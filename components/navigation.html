<!-- Main Navigation -->
<header class="site-header">
  <div class="container">
    <a href="index.html" class="nav-logo" aria-label="Go to homepage">
      <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg">
        <rect x="3" y="7" width="18" height="13" rx="2"/>
        <path d="M8 7V5a2 2 0 012-2h4a2 2 0 012 2v2"/>
      </svg>
      <span>JOBHACKAI</span>
    </a>
    
    <nav class="nav-links" role="navigation" aria-label="Main navigation">
      <a href="index.html">Home</a>
      <div class="nav-dropdown">
        <button class="nav-dropdown-trigger" aria-expanded="false">
          Features
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 4l4 4 4-4"/>
          </svg>
        </button>
        <div class="nav-dropdown-menu">
          <a href="resume-builder.html">Resume Builder</a>
          <a href="interview-prep.html">Interview Prep</a>
          <a href="job-search.html">Job Search</a>
        </div>
      </div>
      <a href="pricing.html">Pricing</a>
      <a href="blog.html">Blog</a>
      <a href="help.html">Help</a>
    </nav>

    <div class="nav-auth">
      <a href="login.html" class="nav-login">Login</a>
    </div>

    <button class="mobile-toggle" aria-label="Open navigation menu" aria-expanded="false" aria-controls="mobileNav">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
  </div>
</header>

<!-- Mobile Navigation -->
<nav class="mobile-nav" id="mobileNav">
  <a href="index.html">Home</a>
  <div class="mobile-nav-group">
    <button class="mobile-nav-trigger">Features</button>
    <div class="mobile-nav-submenu">
      <a href="resume-builder.html">Resume Builder</a>
      <a href="interview-prep.html">Interview Prep</a>
      <a href="job-search.html">Job Search</a>
    </div>
  </div>
  <a href="pricing.html">Pricing</a>
  <a href="blog.html">Blog</a>
  <a href="help.html">Help</a>
  <div class="mobile-nav-auth">
    <a href="login.html">Login</a>
  </div>
</nav>

<!-- User Navigation (shown when logged in) -->
<nav class="user-nav" id="userNav" style="display: none;">
  <div class="container">
    <div class="user-nav-links">
      <a href="dashboard.html" class="auth-required">Dashboard</a>
      <div class="nav-dropdown">
        <button class="nav-dropdown-trigger" aria-expanded="false">
          Resume Builder
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 4l4 4 4-4"/>
          </svg>
        </button>
        <div class="nav-dropdown-menu">
          <a href="resume-editor.html">Create Resume</a>
          <a href="resume-templates.html">Templates</a>
          <a href="resume-history.html">History</a>
        </div>
      </div>
      <div class="nav-dropdown">
        <button class="nav-dropdown-trigger" aria-expanded="false">
          Interview Prep
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 4l4 4 4-4"/>
          </svg>
        </button>
        <div class="nav-dropdown-menu">
          <a href="mock-interviews.html">Mock Interviews</a>
          <a href="interview-questions.html">Question Bank</a>
        </div>
      </div>
      <div class="nav-dropdown">
        <button class="nav-dropdown-trigger" aria-expanded="false">
          Job Search
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 4l4 4 4-4"/>
          </svg>
        </button>
        <div class="nav-dropdown-menu">
          <a href="saved-jobs.html">Saved Jobs</a>
          <a href="applications.html">Applications</a>
        </div>
      </div>
    </div>
    
    <div class="user-nav-profile">
      <div class="nav-dropdown">
        <button class="nav-dropdown-trigger" aria-expanded="false">
          <img src="assets/avatar-placeholder.png" alt="User avatar" class="user-avatar">
          <span class="user-name">John Doe</span>
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M2 4l4 4 4-4"/>
          </svg>
        </button>
        <div class="nav-dropdown-menu">
          <a href="profile.html">Profile</a>
          <a href="settings.html">Settings</a>
          <a href="account-setting.html">Billing</a>
          <div class="nav-divider"></div>
          <a href="logout.html" class="nav-logout">Logout</a>
        </div>
      </div>
    </div>
  </div>
</nav>

<style>
/* Navigation Styles */
.site-header {
  background: var(--color-card-bg);
  border-bottom: 1px solid var(--color-divider);
  position: sticky;
  top: 0;
  z-index: 1000;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--space-md);
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 64px;
}

.nav-logo {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-weight: var(--font-weight-bold);
  font-size: 1.3rem;
  color: var(--color-text-main);
  text-decoration: none;
}

.nav-links {
  display: flex;
  gap: var(--space-md);
  align-items: center;
}

.nav-links a {
  color: var(--color-text-secondary);
  text-decoration: none;
  font-weight: var(--font-weight-semibold);
  transition: color 0.15s;
}

.nav-links a:hover {
  color: var(--color-text-main);
}

.nav-dropdown {
  position: relative;
}

.nav-dropdown-trigger {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-semibold);
  cursor: pointer;
  padding: 0;
}

.nav-dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  background: var(--color-card-bg);
  border: 1px solid var(--color-divider);
  border-radius: var(--radius-button);
  box-shadow: var(--shadow-card);
  padding: var(--space-xs) 0;
  min-width: 200px;
  display: none;
}

.nav-dropdown:hover .nav-dropdown-menu {
  display: block;
}

.nav-dropdown-menu a {
  display: block;
  padding: var(--space-xs) var(--space-sm);
  color: var(--color-text-secondary);
  text-decoration: none;
  transition: background 0.15s;
}

.nav-dropdown-menu a:hover {
  background: var(--color-bg-light);
  color: var(--color-text-main);
}

.nav-auth {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
}

.nav-login {
  color: var(--color-text-secondary);
  text-decoration: none;
  font-weight: var(--font-weight-semibold);
}

.nav-signup {
  background: var(--color-cta-green);
  color: white;
  text-decoration: none;
  padding: 0.75rem 1.25rem;
  border-radius: var(--radius-button);
  font-weight: var(--font-weight-semibold);
  transition: background 0.15s;
}

.nav-signup:hover {
  background: #00c965;
}

/* Hide visitor CTAs while navigation is hydrating to avoid flicker */
html.nav-loading .nav-signup,
html.nav-loading .mobile-nav-signup,
html.nav-loading .nav-login {
  visibility: hidden;
  pointer-events: none;
  opacity: 0;
}

.mobile-toggle {
  display: none;
  background: none;
  border: none;
  cursor: pointer;
  padding: var(--space-xs);
}

.mobile-nav {
  display: none;
  position: fixed;
  top: 64px;
  left: 0;
  right: 0;
  background: var(--color-card-bg);
  border-bottom: 1px solid var(--color-divider);
  padding: var(--space-sm);
  z-index: 999;
}

.mobile-nav a {
  display: block;
  padding: var(--space-sm);
  color: var(--color-text-secondary);
  text-decoration: none;
  font-weight: var(--font-weight-semibold);
}

.mobile-nav-auth {
  margin-top: var(--space-sm);
  padding-top: var(--space-sm);
  border-top: 1px solid var(--color-divider);
}

.mobile-nav-signup {
  background: var(--color-cta-green);
  color: white !important;
  text-align: center;
  border-radius: var(--radius-button);
}

/* User Navigation Styles */
.user-nav {
  background: var(--color-bg-light);
  border-bottom: 1px solid var(--color-divider);
  padding: var(--space-xs) 0;
}

.user-nav-links {
  display: flex;
  gap: var(--space-md);
  align-items: center;
}

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}

.user-name {
  color: var(--color-text-main);
  font-weight: var(--font-weight-semibold);
}

.nav-divider {
  height: 1px;
  background: var(--color-divider);
  margin: var(--space-xs) 0;
}

.nav-logout {
  color: #DC2626 !important;
}

@media (max-width: 1024px) {
  .nav-links, .nav-auth {
    display: none;
  }
  
  .mobile-toggle {
    display: block;
  }
  
  .mobile-nav.active {
    display: block;
  }
}
</style>

<script>
// Mobile Navigation Toggle
const mobileToggle = document.querySelector('.mobile-toggle');
const mobileNav = document.querySelector('.mobile-nav');
const mobileTriggers = document.querySelectorAll('.mobile-nav-trigger');

mobileToggle.addEventListener('click', () => {
  const expanded = mobileToggle.getAttribute('aria-expanded') === 'true';
  mobileToggle.setAttribute('aria-expanded', !expanded);
  mobileNav.classList.toggle('active');
});

mobileTriggers.forEach(trigger => {
  trigger.addEventListener('click', () => {
    const submenu = trigger.nextElementSibling;
    submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
  });
});

// Dropdown Navigation
const dropdownTriggers = document.querySelectorAll('.nav-dropdown-trigger');

dropdownTriggers.forEach(trigger => {
  trigger.addEventListener('click', () => {
    const expanded = trigger.getAttribute('aria-expanded') === 'true';
    trigger.setAttribute('aria-expanded', !expanded);
  });
});

// Close dropdowns when clicking outside
document.addEventListener('click', (e) => {
  if (!e.target.closest('.nav-dropdown')) {
    dropdownTriggers.forEach(trigger => {
      trigger.setAttribute('aria-expanded', 'false');
    });
  }
});

// Authentication-based navigation control
function checkAuthenticationAndUpdateNav() {
  const isAuthenticated = localStorage.getItem('user-authenticated') === 'true';
  const userNav = document.getElementById('userNav');
  const authRequiredLinks = document.querySelectorAll('.auth-required');
  
  if (isAuthenticated) {
    // Show user navigation for authenticated users
    if (userNav) {
      userNav.style.display = 'block';
    }
  } else {
    // Hide user navigation for non-authenticated users
    if (userNav) {
      userNav.style.display = 'none';
    }
    
    // Remove any auth-required links from main navigation
    authRequiredLinks.forEach(link => {
      if (link.parentNode) {
        link.parentNode.removeChild(link);
      }
    });
  }
}

// Run on page load
document.addEventListener('DOMContentLoaded', checkAuthenticationAndUpdateNav);

// Also run when localStorage changes (for SPA-like behavior)
window.addEventListener('storage', checkAuthenticationAndUpdateNav);
</script> 
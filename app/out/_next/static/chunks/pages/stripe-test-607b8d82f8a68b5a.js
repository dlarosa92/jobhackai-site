(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{1260:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stripe-test",function(){return t(5050)}])},5932:function(e,r,t){"use strict";t.d(r,{I:function(){return d}});var i=t(3977),s=t(2370),o=t(3454);let n={apiKey:o.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyCDZksp8XpRJaYnoihiuXT5Uvd0YrbLdfw",authDomain:o.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"jobhackai-90558.firebaseapp.com",projectId:o.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"jobhackai-90558"},l=(0,i.ZF)(n),d=(0,s.v0)(l)},5050:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var i=t(5893),s=t(7294),o=t(5932),n=t(2370);function l(){let[e,r]=(0,s.useState)(null),[t,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(""),[a,p]=(0,s.useState)(""),[h,u]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=(0,n.Aj)(o.I,e=>{r(e)});return()=>e()},[]);let x=async(r,t)=>{if(!e){c("Please sign in first");return}try{l(!0),c("");let i=await fetch("/api/stripe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create-checkout-session",data:{priceId:r,userId:e.uid,userEmail:e.email,planName:t}})}),s=await i.json();console.log("Checkout session response:",s),u(s),s.success&&s.url?(p("Redirecting to Stripe checkout for ".concat(t,"...")),window.location.href=s.url):c("Checkout failed: ".concat(s.error||"Unknown error"))}catch(e){c("Checkout failed: ".concat(e.message)),console.error("Checkout error:",e)}finally{l(!1)}},g=async()=>{if(!e){c("Please sign in first");return}try{l(!0),c("");let r=await fetch("/api/stripe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create-customer-portal",data:{customerId:"cus_test123",userId:e.uid}})}),t=await r.json();console.log("Customer portal response:",t),u(t),t.success&&t.url?(p("Redirecting to customer portal..."),window.open(t.url,"_blank")):c("Customer portal failed: ".concat(t.error||"Unknown error"))}catch(e){c("Customer portal failed: ".concat(e.message)),console.error("Customer portal error:",e)}finally{l(!1)}},m=async()=>{try{l(!0),c("");let e=await fetch("/api/stripe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"webhook",data:{type:"checkout.session.completed",data:{object:{id:"cs_test_123",customer:"cus_test123",amount_total:2900,currency:"usd"}}}})}),r=await e.json();console.log("Webhook test response:",r),u(r),p("Webhook test completed successfully!")}catch(e){c("Webhook test failed: ".concat(e.message)),console.error("Webhook test error:",e)}finally{l(!1)}};return(0,i.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px",fontFamily:"system-ui"},children:[(0,i.jsx)("h1",{children:"Stripe Payment Integration Test"}),(0,i.jsxs)("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f5f5f5",borderRadius:"8px"},children:[(0,i.jsx)("h2",{children:"Current Status"}),e?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"✅ Authenticated User"})}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"UID:"})," ",e.uid]})]}):(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"❌ Not Authenticated"})," - Please sign in to test payments"]})]}),d&&(0,i.jsxs)("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"8px"},children:[(0,i.jsx)("strong",{children:"Error:"})," ",d]}),a&&(0,i.jsxs)("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#e8f5e8",color:"#2e7d32",borderRadius:"8px"},children:[(0,i.jsx)("strong",{children:"Success:"})," ",a]}),(0,i.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,i.jsx)("h2",{children:"JobHackAI Pricing Plans (Test Mode)"}),!e&&(0,i.jsxs)("div",{style:{padding:"15px",backgroundColor:"#fff3e0",color:"#f57c00",borderRadius:"8px",marginBottom:"20px",border:"1px solid #ffb74d"},children:[(0,i.jsx)("strong",{children:"⚠️ Authentication Required:"})," Please sign in first using the",(0,i.jsx)("a",{href:"/auth-test",style:{color:"#1976d2",textDecoration:"underline",marginLeft:"5px"},children:"Firebase Auth Test page"})," to test payment functionality."]}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginBottom:"30px"},children:[{id:"essential",name:"Essential",price:"$29",period:"/month",description:"Perfect for job seekers getting started",features:["Unlimited ATS Resume Scoring","Resume Feedback & Optimization","Interview Question Generator","Email Support"],priceId:"price_1234567890",stripePriceId:"price_1234567890"},{id:"pro",name:"Pro",price:"$59",period:"/month",description:"For serious job seekers",features:["Everything in Essential","Resume Rewrite Service","Cover Letter Generator","Mock Interview Practice","Priority Support"],priceId:"price_0987654321",stripePriceId:"price_0987654321"},{id:"premium",name:"Premium",price:"$99",period:"/month",description:"Complete career optimization",features:["Everything in Pro","LinkedIn Profile Optimizer","Priority Review (24hrs)","Career Coaching Session","Phone Support"],priceId:"price_1122334455",stripePriceId:"price_1122334455"}].map(r=>(0,i.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"12px",padding:"20px",backgroundColor:"white"},children:[(0,i.jsx)("h3",{style:{margin:"0 0 10px 0",fontSize:"24px"},children:r.name}),(0,i.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,i.jsx)("span",{style:{fontSize:"36px",fontWeight:"bold",color:"#1976d2"},children:r.price}),(0,i.jsx)("span",{style:{color:"#666"},children:r.period})]}),(0,i.jsx)("p",{style:{color:"#666",marginBottom:"20px"},children:r.description}),(0,i.jsx)("ul",{style:{listStyle:"none",padding:0,marginBottom:"25px"},children:r.features.map((e,r)=>(0,i.jsxs)("li",{style:{padding:"5px 0",display:"flex",alignItems:"center"},children:[(0,i.jsx)("span",{style:{color:"#4caf50",marginRight:"8px"},children:"✓"}),e]},r))}),(0,i.jsx)("button",{onClick:()=>x(r.stripePriceId,r.name),disabled:t||!e,style:{width:"100%",padding:"12px 24px",backgroundColor:e?"#1976d2":"#ccc",color:"white",border:"none",borderRadius:"8px",cursor:e&&!t?"pointer":"not-allowed",fontSize:"16px",fontWeight:"bold"},children:t?"Processing...":"Subscribe to ".concat(r.name)})]},r.id))})]}),(0,i.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,i.jsx)("h2",{children:"Additional Stripe Tests"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"},children:[(0,i.jsx)("button",{onClick:g,disabled:t||!e,style:{padding:"12px 24px",backgroundColor:e?"#4caf50":"#ccc",color:"white",border:"none",borderRadius:"8px",cursor:e&&!t?"pointer":"not-allowed",fontSize:"16px"},children:t?"Loading...":"Test Customer Portal"}),(0,i.jsx)("button",{onClick:m,disabled:t,style:{padding:"12px 24px",backgroundColor:"#ff9800",color:"white",border:"none",borderRadius:"8px",cursor:t?"not-allowed":"pointer",fontSize:"16px"},children:t?"Testing...":"Test Webhook Handler"})]})]}),h&&(0,i.jsxs)("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#f5f5f5",borderRadius:"8px"},children:[(0,i.jsx)("h3",{children:"API Response"}),(0,i.jsx)("pre",{style:{whiteSpace:"pre-wrap",fontSize:"14px",overflow:"auto"},children:JSON.stringify(h,null,2)})]}),(0,i.jsxs)("div",{style:{marginTop:"40px",padding:"15px",backgroundColor:"#e3f2fd",borderRadius:"8px"},children:[(0,i.jsx)("h3",{children:"Test Instructions"}),(0,i.jsxs)("ol",{style:{fontSize:"14px",lineHeight:"1.6"},children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Sign in first"})," - Use the auth-test page to authenticate"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Test Checkout"})," - Click any plan button to create a Stripe checkout session"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Use Test Cards"})," - In Stripe checkout, use test card numbers:",(0,i.jsxs)("ul",{style:{marginTop:"5px"},children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Success:"})," 4242 4242 4242 4242"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Decline:"})," 4000 0000 0000 0002"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"3D Secure:"})," 4000 0025 0000 3155"]})]})]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Test Customer Portal"})," - Test the billing management portal"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Check Console"})," - Monitor network requests and API responses"]})]})]}),(0,i.jsxs)("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#fff3e0",borderRadius:"8px"},children:[(0,i.jsx)("h3",{children:"Important Notes"}),(0,i.jsxs)("ul",{style:{fontSize:"14px",lineHeight:"1.6"},children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Test Mode:"})," All payments are in Stripe test mode - no real charges"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Price IDs:"})," Current price IDs are placeholders - replace with real Stripe price IDs"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Webhooks:"})," Set up webhook endpoints in Stripe Dashboard for production"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Customer Portal:"})," Requires billing portal to be enabled in Stripe Dashboard"]})]})]})]})}}},function(e){e.O(0,[551,690,888,774,179],function(){return e(e.s=1260)}),_N_E=e.O()}]);
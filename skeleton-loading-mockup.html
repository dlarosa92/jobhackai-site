<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skeleton Loading Mockup - Resume Feedback UAT</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --color-bg-light: #F9FAFB;
      --color-text-main: #1F2937;
      --color-text-secondary: #4B5563;
      --color-text-muted: #6B7280;
      --color-card-bg: #FFFFFF;
      --color-cta-green: #00E676;
      --color-accent-blue: #007BFF;
      --color-divider: #E5E7EB;
      --color-success: #059669;
      --radius-lg: 12px;
      --radius-md: 8px;
      --shadow-card: 0 4px 24px rgba(31,41,55,0.07);
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--color-bg-light);
      padding: 2rem;
      color: var(--color-text-main);
      line-height: 1.6;
    }

    .mockup-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: var(--radius-lg);
      padding: 2rem;
      box-shadow: var(--shadow-card);
    }

    h1 {
      margin-bottom: 0.5rem;
      color: var(--color-text-main);
    }

    .subtitle {
      color: var(--color-text-secondary);
      margin-bottom: 2rem;
      font-size: 0.95rem;
    }

    /* Control Panel */
    .control-panel {
      background: var(--color-bg-light);
      padding: 1.5rem;
      border-radius: var(--radius-md);
      margin-bottom: 2rem;
      border: 2px solid var(--color-divider);
    }

    .control-panel h2 {
      font-size: 1.1rem;
      margin-bottom: 1rem;
      color: var(--color-text-main);
    }

    .phase-buttons {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }

    .phase-btn {
      padding: 0.75rem 1.5rem;
      background: var(--color-accent-blue);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.2s;
    }

    .phase-btn:hover {
      background: #0056b3;
      transform: translateY(-1px);
    }

    .phase-btn.active {
      background: var(--color-cta-green);
    }

    .auto-demo {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--color-divider);
    }

    .auto-demo button {
      padding: 0.75rem 1.5rem;
      background: var(--color-success);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      margin-right: 0.5rem;
    }

    .auto-demo button.secondary {
      background: #6B7280;
    }

    /* Progress Header */
    .rf-progress-header {
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: var(--color-bg-light);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-divider);
    }

    .rf-progress-header h3 {
      font-weight: 600;
      color: var(--color-text-main);
      margin-bottom: 0.25rem;
    }

    .rf-progress-header .description {
      font-size: 0.9rem;
      color: var(--color-text-secondary);
      margin-bottom: 0.5rem;
    }

    .rf-progress-status {
      font-size: 0.95rem;
      color: var(--color-text-main);
      font-weight: 500;
    }

    /* Skeleton Styles */
    .rf-skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: rf-shimmer 1.5s infinite;
      border-radius: var(--radius-lg);
      opacity: 1;
      transition: opacity 0.3s ease;
    }

    .rf-skeleton.hidden {
      opacity: 0;
      pointer-events: none;
    }

    @keyframes rf-shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    .rf-skeleton-rubric-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.2rem;
      margin-top: 1.5rem;
    }

    .rf-skeleton-rubric-card {
      height: 150px;
    }

    .rf-skeleton-feedback-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.2rem;
      margin-top: 3rem;
    }

    .rf-skeleton-feedback-card {
      height: 200px;
    }

    /* Skeleton Container */
    .rf-skeleton-container {
      display: none;
    }

    .rf-skeleton-container.visible {
      display: block;
    }

    /* Content Styles */
    .rf-feedback-content {
      display: none;
    }

    .rf-feedback-content.visible {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .rf-rubric-grid {
      display: none;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.2rem;
      margin-top: 1.5rem;
    }

    .rf-rubric-grid.visible {
      display: grid;
      animation: fadeIn 0.3s ease;
    }

    .rf-rubric-item {
      background: white;
      border: 1px solid var(--color-divider);
      border-radius: var(--radius-lg);
      padding: 1.25rem;
      box-shadow: var(--shadow-card);
    }

    .rf-rubric-label {
      font-weight: 600;
      color: var(--color-text-main);
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }

    .rf-rubric-score {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--color-text-main);
      margin-bottom: 0.5rem;
    }

    .rf-rubric-tip {
      font-size: 0.9rem;
      color: var(--color-text-secondary);
      line-height: 1.5;
    }

    .rf-feedback-grid {
      display: none;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.2rem;
      margin-top: 3rem;
    }

    .rf-feedback-grid.visible {
      display: grid;
      animation: fadeIn 0.3s ease;
    }

    .rf-feedback-item {
      background: white;
      border: 1px solid var(--color-divider);
      border-radius: var(--radius-lg);
      padding: 1.25rem;
      box-shadow: var(--shadow-card);
    }

    .rf-feedback-title {
      font-weight: 600;
      color: var(--color-text-main);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.95rem;
    }

    .status-badge {
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .status-strong {
      background: rgba(5, 150, 105, 0.1);
      color: var(--color-success);
    }

    .status-tunable {
      background: rgba(0, 123, 255, 0.1);
      color: var(--color-accent-blue);
    }

    .rf-feedback-description {
      font-size: 0.9rem;
      color: var(--color-text-secondary);
      margin-bottom: 0.75rem;
      line-height: 1.5;
    }

    .rf-feedback-tips {
      font-size: 0.85rem;
      color: var(--color-text-muted);
      padding-left: 1rem;
      line-height: 1.6;
    }

    .rf-feedback-tips li {
      margin-bottom: 0.5rem;
    }

    /* Phase Indicator */
    .phase-indicator {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background: rgba(0, 0, 0, 0.85);
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: 0.9rem;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    /* Overlay warning */
    .overlay-warning {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.95);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      flex-direction: column;
      gap: 1rem;
    }

    .overlay-warning.visible {
      display: flex;
    }

    .overlay-spinner {
      width: 48px;
      height: 48px;
      border: 4px solid #E5E7EB;
      border-top: 4px solid var(--color-cta-green);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .overlay-message {
      font-size: 1rem;
      font-weight: 500;
      color: var(--color-text-main);
    }

    /* Comparison Section */
    .comparison-section {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 2px solid var(--color-divider);
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-top: 1.5rem;
    }

    .comparison-box {
      padding: 1.5rem;
      border-radius: var(--radius-md);
      border: 2px solid var(--color-divider);
    }

    .comparison-box.broken {
      border-color: #DC2626;
      background: rgba(220, 38, 38, 0.05);
    }

    .comparison-box.fixed {
      border-color: var(--color-success);
      background: rgba(5, 150, 105, 0.05);
    }

    .comparison-box h3 {
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }

    .comparison-box.broken h3 {
      color: #DC2626;
    }

    .comparison-box.fixed h3 {
      color: var(--color-success);
    }

    /* Debug info */
    .debug-info {
      margin-top: 2rem;
      padding: 1rem;
      background: #f3f4f6;
      border-radius: var(--radius-md);
      font-size: 0.85rem;
      font-family: 'Courier New', monospace;
      color: var(--color-text-secondary);
      max-height: 200px;
      overflow-y: auto;
    }

    .debug-info strong {
      color: var(--color-text-main);
    }
  </style>
</head>
<body>
  <div class="mockup-container">
    <h1>üé® Skeleton Loading Mockup - UAT</h1>
    <p class="subtitle">Interactive demonstration of the fixed skeleton loading experience for User Acceptance Testing</p>

    <!-- Control Panel -->
    <div class="control-panel">
      <h2>Control Panel</h2>
      <div class="phase-buttons">
        <button class="phase-btn" onclick="showPhase('upload')">Phase 1: Upload</button>
        <button class="phase-btn" onclick="showPhase('skeleton')">Phase 2: Skeleton</button>
        <button class="phase-btn" onclick="showPhase('ats-arriving')">Phase 3: ATS Arriving</button>
        <button class="phase-btn" onclick="showPhase('ats-visible')">Phase 4: ATS Visible</button>
        <button class="phase-btn" onclick="showPhase('feedback-arriving')">Phase 5: Feedback Arriving</button>
        <button class="phase-btn" onclick="showPhase('complete')">Phase 6: Complete</button>
      </div>
      <div class="auto-demo">
        <button onclick="runAutoDemo()">‚ñ∂Ô∏è Run Auto Demo (Watch All Phases)</button>
        <button onclick="resetDemo()" class="secondary">Reset</button>
        <button onclick="showComparison()" class="secondary">Show Comparison (Broken vs Fixed)</button>
      </div>
    </div>

    <!-- Phase Indicator -->
    <div class="phase-indicator" id="phaseIndicator">Phase 1: Upload</div>

    <!-- Overlay Warning (demonstrates the problem) -->
    <div class="overlay-warning" id="overlayWarning">
      <div class="overlay-spinner"></div>
      <div class="overlay-message">Optimizing for ATS compliance‚Ä¶</div>
    </div>

    <!-- Main Content Area -->
    <div class="demo-area">
      <!-- Progress Header -->
      <div class="rf-progress-header" id="progressHeader">
        <h3>Resume Analysis Progress</h3>
        <div class="description">
          We'll show your ATS score first, then AI role-specific tailoring tips as soon as they're ready.
        </div>
        <div class="rf-progress-status" id="progressStatus">
          Step 1 of 2: Reading your resume and preparing it for analysis‚Ä¶
        </div>
      </div>

      <!-- Skeleton Container -->
      <div class="rf-skeleton-container" id="skeletonContainer">
        <!-- ATS Rubric skeleton - 5 cards -->
        <div class="rf-skeleton-rubric-grid" id="skeletonRubric">
          <div class="rf-skeleton rf-skeleton-rubric-card"></div>
          <div class="rf-skeleton rf-skeleton-rubric-card"></div>
          <div class="rf-skeleton rf-skeleton-rubric-card"></div>
          <div class="rf-skeleton rf-skeleton-rubric-card"></div>
          <div class="rf-skeleton rf-skeleton-rubric-card"></div>
        </div>
        
        <!-- Role-Specific Feedback skeleton - 3 cards -->
        <div class="rf-skeleton-feedback-grid" id="skeletonFeedback">
          <div class="rf-skeleton rf-skeleton-feedback-card"></div>
          <div class="rf-skeleton rf-skeleton-feedback-card"></div>
          <div class="rf-skeleton rf-skeleton-feedback-card"></div>
        </div>
      </div>

      <!-- Feedback Content -->
      <div class="rf-feedback-content" id="feedbackContent">
        <!-- ATS Rubric Grid -->
        <div class="rf-rubric-grid" id="rubricGrid">
          <div class="rf-rubric-item">
            <div class="rf-rubric-label">Keyword Relevance</div>
            <div class="rf-rubric-score">6 / 40</div>
            <div class="rf-rubric-tip">Significantly improve keyword relevance by adding role-specific skills and terms.</div>
          </div>
          <div class="rf-rubric-item">
            <div class="rf-rubric-label">Formatting Compliance</div>
            <div class="rf-rubric-score">16 / 20</div>
            <div class="rf-rubric-tip">Good formatting. Missing Education section, Missing Skills section.</div>
          </div>
          <div class="rf-rubric-item">
            <div class="rf-rubric-label">Structure & Section Completeness</div>
            <div class="rf-rubric-score">13 / 15</div>
            <div class="rf-rubric-tip">Well-structured resume. Order sections: Contact, Experience, Education, Skills.</div>
          </div>
          <div class="rf-rubric-item">
            <div class="rf-rubric-label">Tone & Clarity</div>
            <div class="rf-rubric-score">7 / 15</div>
            <div class="rf-rubric-tip">Improve clarity. Use action verbs, concise bullet points, and quantify outcomes.</div>
          </div>
          <div class="rf-rubric-item">
            <div class="rf-rubric-label">Grammar & Spelling</div>
            <div class="rf-rubric-score">6 / 10</div>
            <div class="rf-rubric-tip">Multiple grammar and spelling errors detected. Review and correct key sections.</div>
          </div>
        </div>

        <!-- Role-Specific Feedback Grid -->
        <div class="rf-feedback-grid" id="feedbackGrid">
          <div class="rf-feedback-item">
            <div class="rf-feedback-title">
              Header & Contact
              <span class="status-badge status-strong">Strong Match</span>
            </div>
            <div class="rf-feedback-description">
              The header is clear and includes essential contact information.
            </div>
            <ul class="rf-feedback-tips">
              <li>Ensure your email address is professional and appropriate for job applications.</li>
              <li>Consider adding a location or city to indicate your job search area.</li>
            </ul>
          </div>
          <div class="rf-feedback-item">
            <div class="rf-feedback-title">
              Professional Summary
              <span class="status-badge status-tunable">Good but Tunable</span>
            </div>
            <div class="rf-feedback-description">
              A Professional Summary is missing, which could effectively highlight your qualifications.
            </div>
            <ul class="rf-feedback-tips">
              <li>Add a summary that emphasizes your experience in data engineering and relevant skills.</li>
              <li>Include your career goals and what you bring to a potential employer.</li>
            </ul>
          </div>
          <div class="rf-feedback-item">
            <div class="rf-feedback-title">
              Experience
              <span class="status-badge status-tunable">Good but Tunable</span>
            </div>
            <div class="rf-feedback-description">
              The experience section lacks detail and specific accomplishments relevant to data engineering.
            </div>
            <ul class="rf-feedback-tips">
              <li>Expand on your role at TechCo with specific projects and technologies used.</li>
              <li>Quantify your achievements, such as 'Improved data processing speed by 30% through optimization.'</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Comparison Section -->
    <div class="comparison-section" id="comparisonSection" style="display: none;">
      <h2>Visual Comparison: Broken vs Fixed</h2>
      <div class="comparison-grid">
        <div class="comparison-box broken">
          <h3>‚ùå Current (Broken) Behavior</h3>
          <p><strong>Problem:</strong> Content appears immediately while skeleton is still fading, causing visual overlap.</p>
          <p><strong>Timeline:</strong></p>
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem; line-height: 1.8;">
            <li>0ms: Skeleton visible (opacity: 100%)</li>
            <li>500ms: ATS results arrive</li>
            <li>500ms: Content shows immediately ‚ùå</li>
            <li>500-800ms: Skeleton fading (opacity: 100% ‚Üí 0%)</li>
            <li><strong>Result: Both visible at once!</strong></li>
          </ul>
        </div>
        <div class="comparison-box fixed">
          <h3>‚úÖ Fixed Behavior</h3>
          <p><strong>Solution:</strong> Wait for skeleton fade to complete before showing content.</p>
          <p><strong>Timeline:</strong></p>
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem; line-height: 1.8;">
            <li>0ms: Skeleton visible (opacity: 100%)</li>
            <li>500ms: ATS results arrive</li>
            <li>500ms: Skeleton starts fading (opacity: 100% ‚Üí 0%)</li>
            <li>800ms: Skeleton fade completes</li>
            <li>800ms: Content shows ‚úÖ</li>
            <li><strong>Result: Clean transition, no overlap!</strong></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Debug Info -->
    <div class="debug-info" id="debugInfo">
      <strong>Debug Info:</strong><br>
      <span id="debugText">Ready. Click a phase button to start.</span>
    </div>
  </div>

  <script>
    let currentPhase = 'upload';
    let autoDemoRunning = false;

    const phases = {
      'upload': {
        name: 'Phase 1: Upload',
        progressStatus: 'Step 1 of 2: Reading your resume and preparing it for analysis‚Ä¶',
        showProgress: true,
        showSkeleton: false,
        showContent: false,
        showOverlay: false,
        skeletonOpacity: 0
      },
      'skeleton': {
        name: 'Phase 2: Skeleton Loading',
        progressStatus: 'Step 2 of 2: Generating AI feedback...',
        showProgress: true,
        showSkeleton: true,
        showContent: false,
        showOverlay: false,
        skeletonOpacity: 1
      },
      'ats-arriving': {
        name: 'Phase 3: ATS Results Arriving',
        progressStatus: 'Step 2 of 2: Generating AI feedback...',
        showProgress: true,
        showSkeleton: true,
        showContent: false,
        showOverlay: false,
        skeletonOpacity: 0.5, // Fading
        description: 'Skeleton is fading out (opacity: 50%)'
      },
      'ats-visible': {
        name: 'Phase 4: ATS Content Visible',
        progressStatus: 'Step 2 of 2: Generating AI feedback...',
        showProgress: true,
        showSkeleton: false,
        showContent: true,
        showRubric: true,
        showFeedback: false,
        showOverlay: false,
        skeletonOpacity: 0
      },
      'feedback-arriving': {
        name: 'Phase 5: Feedback Arriving',
        progressStatus: 'Step 2 of 2: Generating AI feedback...',
        showProgress: true,
        showSkeleton: false,
        showContent: true,
        showRubric: true,
        showFeedback: false,
        showOverlay: false,
        skeletonOpacity: 0
      },
      'complete': {
        name: 'Phase 6: Complete',
        progressStatus: 'Analysis complete. You can now review ATS results, tailoring tips, and (for Pro) request a full rewrite.',
        showProgress: true,
        showSkeleton: false,
        showContent: true,
        showRubric: true,
        showFeedback: true,
        showOverlay: false,
        skeletonOpacity: 0
      }
    };

    function updateDebugInfo(text) {
      const debugText = document.getElementById('debugText');
      const timestamp = new Date().toLocaleTimeString();
      debugText.innerHTML = `<strong>[${timestamp}]</strong> ${text}`;
    }

    function showPhase(phaseName) {
      if (autoDemoRunning) return;
      
      currentPhase = phaseName;
      const phase = phases[phaseName];
      
      if (!phase) return;

      // Update phase indicator
      document.getElementById('phaseIndicator').textContent = phase.name;

      // Update progress header
      const progressHeader = document.getElementById('progressHeader');
      const progressStatus = document.getElementById('progressStatus');
      
      if (phase.showProgress) {
        progressHeader.style.display = 'block';
        progressStatus.textContent = phase.progressStatus;
      } else {
        progressHeader.style.display = 'none';
      }

      // Handle skeleton
      const skeletonContainer = document.getElementById('skeletonContainer');
      const skeletonRubric = document.getElementById('skeletonRubric');
      const skeletonFeedback = document.getElementById('skeletonFeedback');
      const skeletons = skeletonContainer.querySelectorAll('.rf-skeleton');

      if (phase.showSkeleton) {
        skeletonContainer.classList.add('visible');
        skeletons.forEach(skeleton => {
          skeleton.classList.remove('hidden');
          skeleton.style.opacity = phase.skeletonOpacity || 1;
        });
      } else {
        skeletons.forEach(skeleton => {
          skeleton.classList.add('hidden');
        });
        setTimeout(() => {
          skeletonContainer.classList.remove('visible');
        }, 300);
      }

      // Handle content
      const feedbackContent = document.getElementById('feedbackContent');
      const rubricGrid = document.getElementById('rubricGrid');
      const feedbackGrid = document.getElementById('feedbackGrid');

      if (phase.showContent) {
        feedbackContent.classList.add('visible');
        
        if (phase.showRubric) {
          rubricGrid.classList.add('visible');
        } else {
          rubricGrid.classList.remove('visible');
        }

        if (phase.showFeedback) {
          feedbackGrid.classList.add('visible');
        } else {
          feedbackGrid.classList.remove('visible');
        }
      } else {
        feedbackContent.classList.remove('visible');
        rubricGrid.classList.remove('visible');
        feedbackGrid.classList.remove('visible');
      }

      // Handle overlay
      const overlay = document.getElementById('overlayWarning');
      if (phase.showOverlay) {
        overlay.classList.add('visible');
      } else {
        overlay.classList.remove('visible');
      }

      // Update active button
      document.querySelectorAll('.phase-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event?.target?.classList.add('active');

      // Update debug info
      updateDebugInfo(`${phase.name} - Skeleton: ${phase.showSkeleton ? 'visible' : 'hidden'}, Content: ${phase.showContent ? 'visible' : 'hidden'}, Overlay: ${phase.showOverlay ? 'visible' : 'hidden'}`);
    }

    async function runAutoDemo() {
      if (autoDemoRunning) return;
      autoDemoRunning = true;

      const phaseNames = ['upload', 'skeleton', 'ats-arriving', 'ats-visible', 'feedback-arriving', 'complete'];
      
      for (let i = 0; i < phaseNames.length; i++) {
        const phaseName = phaseNames[i];
        showPhase(phaseName);
        
        // Update button state
        document.querySelectorAll('.phase-btn').forEach((btn, idx) => {
          if (idx === i) {
            btn.classList.add('active');
          } else {
            btn.classList.remove('active');
          }
        });

        // Wait before next phase
        if (i < phaseNames.length - 1) {
          await new Promise(resolve => setTimeout(resolve, 2000));
        }
      }

      autoDemoRunning = false;
      updateDebugInfo('Auto demo completed!');
    }

    function resetDemo() {
      autoDemoRunning = false;
      showPhase('upload');
      document.querySelectorAll('.phase-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      updateDebugInfo('Demo reset to initial state.');
    }

    function showComparison() {
      const comparisonSection = document.getElementById('comparisonSection');
      if (comparisonSection.style.display === 'none') {
        comparisonSection.style.display = 'block';
        comparisonSection.scrollIntoView({ behavior: 'smooth' });
      } else {
        comparisonSection.style.display = 'none';
      }
    }

    // Initialize
    showPhase('upload');
  </script>
</body>
</html>




